@using IQMedia.Model;
@using IQMedia.Shared.Utility;
@using IQCommon.Model;
<div style="padding: 10px 0px 10px 0px;">
    @if (Model != null && Model["Report"] != null && Model["Report"].ReportDetails != null && Model["Report"].ArchiveResults != null)
    {
        IQArchive_DisplayLibraryReport report = (IQArchive_DisplayLibraryReport)Model["Report"];
        
        <style type="text/css">
            .mediatitlediv
            {
                clear:both;
                line-height: 25px;
                background-color: #EAEAEA;
                font-weight: bold;
                font-size: 15px;
                border: 1px solid #A0A0A0;
                vertical-align: middle;
                padding-left: 10px;
                margin-right:20px;
            }
            .categorytitlediv
            {
                line-height: 25px;
                font-weight: bold;
                font-size: 14px;
                padding-bottom: 5px;
                border-bottom: 1px solid #A0A0A0;
            }
            .paddingtop15
            {
                padding-top: 15px;
            }
            .reportMedia
            {
                background-color:#ffffff;
                margin-right:20px;
            }
        </style>
        ActiveUser sessionInformation = IQMedia.WebApplication.Utility.ActiveUserMgr.GetActiveUser();
        List<string> lstNielsenAudienceTypes = sessionInformation.MediaTypes.Where(w => w.RequireNielsenAccess && w.UseAudience && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();
        List<string> lstNielsenMediaValueTypes = sessionInformation.MediaTypes.Where(w => w.RequireNielsenAccess && w.UseMediaValue && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();
        List<string> lstCompeteAudienceTypes = sessionInformation.MediaTypes.Where(w => w.RequireCompeteAccess && w.UseAudience && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();
        List<string> lstCompeteMediaValueTypes = sessionInformation.MediaTypes.Where(w => w.RequireCompeteAccess && w.UseMediaValue && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();
        List<string> lstOtherAudienceTypes = sessionInformation.MediaTypes.Where(w => !w.RequireCompeteAccess && !w.RequireNielsenAccess && w.UseAudience && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();
        List<string> lstOtherMediaValueTypes = sessionInformation.MediaTypes.Where(w => !w.RequireCompeteAccess && !w.RequireNielsenAccess && w.UseMediaValue && w.TypeLevel == 2).Select(s => s.SubMediaType).ToList();

        string logoVersion = "?v=1.3";
        string mediaIconFormat = "../images/MediaIcon/{0}" + logoVersion;
        string Logo = System.Configuration.ConfigurationManager.AppSettings["UrlReportHeader"];
        Logo += sessionInformation.ClientGUID + "/" + report.ReportDetails._ReportImage;

        Int64 totalAudience = 0;
        decimal totalMediaValue = 0;
        Int64 totalNationalAudience = 0;
        decimal totalNationalMediaValue = 0;
        List<IQArchive_MediaModel> lstMediaResults;

        if (sessionInformation.IsNielsenData)
        {
            lstMediaResults = report.ArchiveResults.Where(w => lstNielsenAudienceTypes.Contains(w.SubMediaType.ToString())).ToList();
            if (lstMediaResults.Count > 0)
            {
                totalAudience += lstMediaResults.Sum(s => s.Audience < 0 ? 0 : s.Audience);
                totalNationalAudience += lstMediaResults.Sum(s => s.National_Nielsen_Audience.HasValue && s.National_Nielsen_Audience > 0 ? s.National_Nielsen_Audience.Value : 0);
            }

            lstMediaResults = report.ArchiveResults.Where(w => lstNielsenMediaValueTypes.Contains(w.SubMediaType.ToString())).ToList();
            if (lstMediaResults.Count > 0)
            {
                totalMediaValue += lstMediaResults.Sum(s => !s.MediaValue.HasValue || s.MediaValue.Value < 0 ? 0 : s.MediaValue.Value);
                totalNationalMediaValue += lstMediaResults.Sum(s => s.National_IQAdShareValue.HasValue && s.National_IQAdShareValue > 0 ? s.National_IQAdShareValue.Value : 0);
            }
        }
        if (sessionInformation.IsCompeteData)
        {
            lstMediaResults = report.ArchiveResults.Where(w => lstCompeteAudienceTypes.Contains(w.SubMediaType.ToString())).ToList();
            if (lstMediaResults.Count > 0)
            {
                totalAudience += lstMediaResults.Sum(s => s.Audience < 0 ? 0 : s.Audience);
            }

            lstMediaResults = report.ArchiveResults.Where(w => lstCompeteMediaValueTypes.Contains(w.SubMediaType.ToString())).ToList();
            if (lstMediaResults.Count > 0)
            {
                totalMediaValue += lstMediaResults.Sum(s => !s.MediaValue.HasValue || s.MediaValue.Value < 0 ? 0 : s.MediaValue.Value);
            }
        }

        lstMediaResults = report.ArchiveResults.Where(w => lstOtherAudienceTypes.Contains(w.SubMediaType.ToString())).ToList();
        if (lstMediaResults.Count > 0)
        {
            totalAudience += lstMediaResults.Sum(s => s.Audience < 0 ? 0 : s.Audience);
        }

        lstMediaResults = report.ArchiveResults.Where(w => lstOtherMediaValueTypes.Contains(w.SubMediaType.ToString())).ToList();
        if (lstMediaResults.Count > 0)
        {
            totalMediaValue += lstMediaResults.Sum(s => !s.MediaValue.HasValue || s.MediaValue.Value < 0 ? 0 : s.MediaValue.Value);
        }
        
        <input type="hidden" id="hdnReportID" value="@report.ReportDetails.ID" />
        
        <div class="paddingRight20">
            <div id="divLogo" class="float-left width100p">
                @if (!string.IsNullOrEmpty(report.ReportDetails._ReportImage))
                {
                    <img src="@Logo@logoVersion" alt="logo" />
                }
                else
                {
                    <img src="~/images/logo_N.png@(logoVersion)" alt="iq logo" />
                }
            </div>
            <div class="float-right clearfix" style="padding-top: 15px;">
                @if (report.ReportDetails.Settings.ShowTotalNationalAudience)
                {
                    <div>
                        Total National Audience :
                        @string.Format("{0:N0}", totalNationalAudience)
                    </div>
                }
                @if (report.ReportDetails.Settings.ShowTotalNationalMediaValue)
                {
                    <div>
                        National Media Value : $ @string.Format("{0:N2}", totalNationalMediaValue)
                    </div>
                }
                @if (report.ReportDetails.Settings.ShowTotalAudience)
                {
                    <div>
                        Total Audience :
                        @string.Format("{0:N0}", totalAudience)
                    </div>
                }
                @if (report.ReportDetails.Settings.ShowTotalMediaValue)
                {
                    <div>
                        Media Value : $ @string.Format("{0:N2}", totalMediaValue)
                    </div>
                }
            </div>
            <!-- Report Title -->
            <div id="divReportTitle" style="padding-top: 15px; padding-bottom: 15px;" class="clear">
                <h4 id="h4DisplayReportTitle">@report.ReportDetails.Title</h4>
            </div>
            <div id="divChartData">
                <div id="divOverview" class="displayNone">
                    <div class="dashboardHeaderMainDiv">
                        <div class="pull-left dashboardHeader">
                            @CommonFunctions.GetEnumDescription(CommonFunctions.DashBoardMediumType.Overview)
                        </div>
                    </div>
                    <div id="divOverviewChart"></div>
                </div>
                @foreach (IQ_MediaTypeModel mediaType in sessionInformation.MediaTypes.Where(w => w.TypeLevel == 1 && w.HasAccess))
                {
                    <div id="div@(mediaType.MediaType)" class="clear paddingtop15 displayNone">
                    <div class="dashboardHeaderMainDiv">
                        <div class="pull-left dashboardHeader">
                            @mediaType.DisplayName
                        </div>
                    </div>
                    <div id="div@(mediaType.MediaType)Chart"></div>
                </div>
                }
            </div>
            @if (report.ReportDetails.Settings.ShowCoverageSources)
            {
                <div class="mediatitlediv" style="margin-top:15px;">
                    Coverage Sources
                </div>
                <!-- Primary group summary -->
                <div id="divSourceSummary" style="padding: 15px 0px 15px 25px;">
                    @foreach (KeyValuePair<string, int> kvp in report.GroupTier1Counts)
                    {
                        if (kvp.Value > 0)
                        {
                            <div>
                                <span>@kvp.Key</span>
                                <span>-</span> 
                                <span>@kvp.Value</span>
                            </div>
                        }
                    }
                </div>
            }
        </div>
    
        <div class="restrictZone">
            <!-- Generate media items for primary and secondary groups -->
            @foreach (IQArchive_GroupTier1Model groupTier1 in report.GroupTier1Results)
            {
                <!-- Hide empty groups when not sorting -->
                if (Model["IsSort"] || report.GroupTier1Counts[groupTier1.GroupName] > 0)
                {
                    <div class="mediatitlediv">
                        @groupTier1.GroupName
                    </div>
                    <div style="padding:5px 20px 0px 0px;">
                        @if (report.ReportDetails.Settings.ShowAudience)
                        {
                            <div style="float:right;">
                                Audience: @groupTier1.TotalAudience.ToString("N0")
                            </div>
                        }
                    
                        @if (report.ReportDetails.Settings.ShowMediaValue)
                        {
                            <div style="clear:both;float:right;">
                                Media Value: $ @groupTier1.TotalMediaValue.ToString("N2")
                            </div>
                        }
                    </div>   
                    <div style="clear:both;padding-top:5px;"></div>
                        if (groupTier1.GroupTier2Counts != null && groupTier1.GroupTier2Counts.Count > 0)
                        { 
                        <div style="padding-bottom: 10px; padding-left: 25px;">
                            @foreach (KeyValuePair<string, int> kvp in groupTier1.GroupTier2Counts)
                            {
                                if (kvp.Value > 0)
                                {
                                    <div>
                                        <span>@kvp.Key</span> 
                                        <span>-</span> 
                                        <span>@kvp.Value</span>
                                    </div>
                                }
                            }
                        </div>
                        }

                        foreach (IQArchive_GroupTier2Model groupTier2 in groupTier1.GroupTier2Results)
                        {
                        <!-- Hide empty groups when not sorting -->
                            if (Model["IsSort"] || groupTier2.ArchiveResults.Count > 0)
                            {
                                if (groupTier2.IsEnabled)
                                {
                                <div class="categorytitlediv">
                                    @groupTier2.GroupName
                                </div>
                                }
                            <!-- Specify group IDs here for use on save. -->
                            <div class="groupContainer" groupTier1="@groupTier1.GroupValue" groupTier2="@(groupTier2.IsEnabled ? groupTier2.GroupValue : "")">
                                @if (Model["IsSort"] == true)
                                {
                                    <!-- Add a placeholder div that will be displayed if a group is empty, so that items can be moved into it -->
                                    <div id="divPH_@(groupTier1.GroupValue)_@(groupTier2.GroupValue)" class="media placeholder @(groupTier2.ArchiveResults.Count == 0 ? "" : "displayNone")">
                                        Drop item here to add to this group
                                    </div>
                                }
                    
                                @foreach (IQMedia.Model.IQArchive_MediaModel item in groupTier2.ArchiveResults)
                                {
                                    IQ_MediaTypeModel objSubMediaType = sessionInformation.MediaTypes.First(w => w.SubMediaType == item.SubMediaType.ToString() && w.TypeLevel == 2);

                                    string Month = item.MediaDate != null ? item.MediaDate.ToString("MMM", System.Globalization.CultureInfo.InvariantCulture) : string.Empty;
                                    string Day = item.MediaDate != null ? item.MediaDate.Day.ToString() : string.Empty;
                                    string Time = item.MediaDate != null ? item.MediaDate.ToString("hh:mm tt") : string.Empty;
                                    string fTitle = string.Empty;
                                    string sTitle = string.Empty;
                                    string displayText = string.Empty;
                                    string sPub = string.Empty;
                                    string fPub = string.Empty;

                                    string sLocalAudience = string.Empty;
                                    string fLocalAudience = string.Empty;
                                    string sLocalMediaValue = string.Empty;
                                    string fLocalMediaValue = string.Empty;
                                    string sNationalAudience = string.Empty;
                                    string fNationalAudience = string.Empty;
                                    string sNationalMediaValue = string.Empty;
                                    string fNationalMediaValue = string.Empty;

                                    int Billion = 1000000000;
                                    decimal BillionD = 1000000000;
                                    int Million = 1000000;
                                    decimal MillionD = 1000000;

                                    if (!string.IsNullOrWhiteSpace(item.Title))
                                    {
                                        fTitle = item.Title.Trim();

                                        if (fTitle.Length > 65)
                                        {
                                            sTitle = fTitle.Substring(0, 62) + "...";
                                        }
                                        else
                                        {
                                            sTitle = fTitle;
                                        }
                                    }

                                    if (!string.IsNullOrWhiteSpace(item.DisplayText))
                                    {
                                        displayText = item.DisplayText.Trim();
                                    }

                                    switch (item.SubMediaType)
                                    {
                                        case CommonFunctions.CategoryType.TV:
                                            IQArchive_ArchiveClipModel TVModel = item.MediaData as IQArchive_ArchiveClipModel;
                                            string TVThumbUrl = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["IQArchieve_TVThumbUrl"]);
                                            TVThumbUrl += TVModel.ClipID;
                                            Month = TVModel.LocalDateTime != null ? TVModel.LocalDateTime.ToString("MMM", System.Globalization.CultureInfo.InvariantCulture) : string.Empty;
                                            Day = TVModel.LocalDateTime != null ? TVModel.LocalDateTime.Day.ToString() : string.Empty;
                                            Time = TVModel.LocalDateTime != null ? TVModel.LocalDateTime.ToString("hh:mm tt") : string.Empty;

                                            if (TVModel.Nielsen_Audience.HasValue && TVModel.Nielsen_Audience > 0)
                                            {
                                                fLocalAudience = string.Format("{0:N0}", TVModel.Nielsen_Audience);

                                                if (TVModel.Nielsen_Audience >= Billion)
                                                {
                                                    sLocalAudience = string.Format("{0:F1} bil", TVModel.Nielsen_Audience / BillionD);
                                                }
                                                else if (TVModel.Nielsen_Audience >= Million)
                                                {
                                                    sLocalAudience = string.Format("{0:F1} mil", TVModel.Nielsen_Audience / MillionD);
                                                }
                                                else
                                                {
                                                    sLocalAudience = fLocalAudience;
                                                }
                                            }
                                            else
                                            {
                                                sLocalAudience = "NA";
                                            }

                                            if (TVModel.IQAdShareValue.HasValue && TVModel.IQAdShareValue > 0)
                                            {
                                                fLocalMediaValue = string.Format("{0:N2}", TVModel.IQAdShareValue);

                                                if (TVModel.IQAdShareValue >= BillionD)
                                                {
                                                    sLocalMediaValue = string.Format("{0:F1} bil", TVModel.IQAdShareValue / BillionD);
                                                }
                                                else if (TVModel.IQAdShareValue >= MillionD)
                                                {
                                                    sLocalMediaValue = string.Format("{0:F1} mil", TVModel.IQAdShareValue / MillionD);
                                                }
                                                else
                                                {
                                                    sLocalMediaValue = fLocalMediaValue;
                                                }
                                            }
                                            else
                                            {
                                                sLocalMediaValue = "NA";
                                            }

                                            if (TVModel.National_Nielsen_Audience.HasValue)
                                            {
                                                fNationalAudience = string.Format("{0:N0}", TVModel.National_Nielsen_Audience);

                                                if (TVModel.National_Nielsen_Audience >= Billion)
                                                {
                                                    sNationalAudience = string.Format("{0:F1} bil", TVModel.National_Nielsen_Audience / BillionD);
                                                }
                                                else if (TVModel.National_Nielsen_Audience >= Million)
                                                {
                                                    sNationalAudience = string.Format("{0:F1} mil", TVModel.National_Nielsen_Audience / MillionD);
                                                }
                                                else
                                                {
                                                    sNationalAudience = fNationalAudience;
                                                }
                                            }

                                            if (TVModel.National_IQAdShareValue.HasValue)
                                            {
                                                fNationalMediaValue = string.Format("{0:N2}", TVModel.National_IQAdShareValue);

                                                if (TVModel.National_IQAdShareValue >= Billion)
                                                {
                                                    sNationalMediaValue = string.Format("{0:F1} bil", TVModel.National_IQAdShareValue / BillionD);
                                                }
                                                else if (TVModel.National_IQAdShareValue >= Million)
                                                {
                                                    sNationalMediaValue = string.Format("{0:F1} mil", TVModel.National_IQAdShareValue / MillionD);
                                                }
                                                else
                                                {
                                                    sNationalMediaValue = fNationalMediaValue;
                                                }
                                            }

                                            if (!string.IsNullOrWhiteSpace(TVModel.Market))
                                            {
                                                fPub = TVModel.Market.Trim();

                                                if (fPub.Length > 23)
                                                {
                                                    sPub = fPub.Substring(0, 21) + "...";
                                                }
                                                else
                                                {
                                                    sPub = fPub;
                                                }
                                            }
                                            
            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @TVModel.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@TVModel.StationLogo" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right FeedsVideoSpacer">
                    <div class="FeedsVideo positionRelative float-left">
                        <a id="aPlay_@item.ID" class="cursorPointer" onclick="LoadClipPlayer('@TVModel.ClipID');">
                            <img csrc="@TVThumbUrl" class="maxwidth130" alt="thumb url" />
                        </a>
                    </div>
                    <input type="checkbox" id="chkReportTV_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentVideo">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        @Html.Raw(sTitle)
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((TVModel.NegativeSentiment * 6) > 25 ? 25 : (TVModel.NegativeSentiment * 6))px;'>
                                                    @TVModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((TVModel.PositiveSentiment * 6) > 25 ? 25 : (TVModel.PositiveSentiment * 6))px;'>
                                                    @TVModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        @if (sessionInformation.IsNielsenData)
                        {
                            <div class="viewcontentdetail">
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowAudience && TVModel.Nielsen_Audience > 0)
                                    {
                                        <div class="view" title="Local Audience @fLocalAudience">
                                            @sLocalAudience
                                        </div>
                                    }
                                </div>
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowMediaValue && TVModel.IQAdShareValue > 0)
                                    {
                                        <div class="price" title="Local Media Value @fLocalMediaValue">
                                            @sLocalMediaValue
                                            @(!string.IsNullOrWhiteSpace(TVModel.Nielsen_Result) ? TVModel.Nielsen_Result.ToUpper() : string.Empty)
                                        </div>
                                    }
                                </div>
                                @if (report.ReportDetails.Settings.ShowNationalValues)
                                {
                                    <div class="viewlongdetail">
                                        @if (TVModel.National_Nielsen_Audience.HasValue)
                                        {
                                            <div class="totalview" title="National Audience @fNationalAudience">
                                                @sNationalAudience
                                            </div>
                                        }
                                    </div>
                                    <div class="viewlongdetail">
                                        @if (TVModel.National_IQAdShareValue.HasValue)
                                        { 
                                            <div class="totalprice" title="National Media Value @fNationalMediaValue">
                                                @sNationalMediaValue
                                                @(!string.IsNullOrWhiteSpace(TVModel.National_Nielsen_Result) ? TVModel.National_Nielsen_Result.ToUpper() : string.Empty)
                                            </div>
                                        }
                                    </div>
                                }
                            </div>
                        }
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.TW:
                                                                                                                                                            IQArchive_ArchiveTweetsModel twitterModel = item.MediaData as IQArchive_ArchiveTweetsModel;
                                                                                                                                                            string actorlink = string.Empty;

                                                                                                                                                            string sFriends = string.Empty;
                                                                                                                                                            string fFriends = string.Format("{0:N0}", twitterModel.FreiendsCount);
                                                                                                                                                            string sFollowers = string.Empty;
                                                                                                                                                            string fFollowers = string.Format("{0:N0}", twitterModel.FollowersCount);

                                                                                                                                                            if (twitterModel.FollowersCount >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sFollowers = string.Format("{0:F1} bil", twitterModel.FollowersCount / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (twitterModel.FollowersCount >= Million)
                                                                                                                                                            {
                                                                                                                                                                sFollowers = string.Format("{0:F1} mil", twitterModel.FollowersCount / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sFollowers = fFollowers;
                                                                                                                                                            }

                                                                                                                                                            if (twitterModel.FreiendsCount >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sFriends = string.Format("{0:F1} bil", twitterModel.FreiendsCount / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (twitterModel.FreiendsCount >= Million)
                                                                                                                                                            {
                                                                                                                                                                sFriends = string.Format("{0:F1} mil", twitterModel.FreiendsCount / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sFriends = fFriends;
                                                                                                                                                            }

                                                                                                                                                            if (CommonFunctions.Validate_url(twitterModel.ActorLink + "/status/" + twitterModel.TweetID))
                                                                                                                                                            {
                                                                                                                                                                actorlink = twitterModel.ActorLink + "/status/" + twitterModel.TweetID;
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(twitterModel.ActorDisplayname))
                                                                                                                                                            {
                                                                                                                                                                fTitle = twitterModel.ActorDisplayname.Trim();

                                                                                                                                                                if (fTitle.Length > 65)
                                                                                                                                                                {
                                                                                                                                                                    sTitle = fTitle.Substring(0, 62) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sTitle = fTitle;
                                                                                                                                                                }
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(twitterModel.PreferredUserName))
                                                                                                                                                            {
                                                                                                                                                                fPub = twitterModel.PreferredUserName.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportTW_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone borderBoxSizing">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a id="aActorLink_@item.ID" target="_blank" href="@actorlink">
                            <span id="lblDisplayName_@item.ID">@Html.Raw(sTitle)</span>
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px">
                        </div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((twitterModel.NegativeSentiment * 6) > 25 ? 25 : (twitterModel.NegativeSentiment * 6))px;'>
                                                    @twitterModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((twitterModel.PositiveSentiment * 6) > 25 ? 25 : (twitterModel.PositiveSentiment * 6))px;'>
                                                    @twitterModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            <div class="viewshortdetail">
                                <div class="klout" title="Klout Score @(string.Format("{0:N0}", twitterModel.KloutScore))">
                                    @(string.Format("{0:N0}", twitterModel.KloutScore))
                                </div>
                            </div>
                            <div class="viewshortdetail">
                                @if (report.ReportDetails.Settings.ShowAudience)
                                {
                                    <div class="followers" title="Followers @fFollowers">
                                        @sFollowers
                                    </div>
                                }
                            </div>
                            <div class="viewshortdetail">
                                <div class="following" title="Following @fFriends">
                                    @sFriends
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.NM:
                                        case CommonFunctions.CategoryType.LN:
                                                                                                                                                            IQArchive_ArchiveNMModel newsMediaModel = item.MediaData as IQArchive_ArchiveNMModel;

                                                                                                                                                            if (newsMediaModel.Compete_Audience.HasValue && newsMediaModel.Compete_Audience > 0)
                                                                                                                                                            {
                                                                                                                                                                fLocalAudience = string.Format("{0:N0}", newsMediaModel.Compete_Audience);

                                                                                                                                                                if (newsMediaModel.Compete_Audience >= Billion)
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = string.Format("{0:F1} bil", newsMediaModel.Compete_Audience / BillionD);
                                                                                                                                                                }
                                                                                                                                                                else if (newsMediaModel.Compete_Audience >= Million)
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = string.Format("{0:F1} mil", newsMediaModel.Compete_Audience / MillionD);
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = fLocalAudience;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sLocalAudience = "NA";
                                                                                                                                                            }

                                                                                                                                                            if (newsMediaModel.IQAdShareValue.HasValue && newsMediaModel.IQAdShareValue > 0)
                                                                                                                                                            {
                                                                                                                                                                fLocalMediaValue = string.Format("{0:N2}", newsMediaModel.IQAdShareValue);

                                                                                                                                                                if (newsMediaModel.IQAdShareValue >= BillionD)
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = string.Format("{0:F1} bil", newsMediaModel.IQAdShareValue / BillionD);
                                                                                                                                                                }
                                                                                                                                                                else if (newsMediaModel.IQAdShareValue >= MillionD)
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = string.Format("{0:F1} mil", newsMediaModel.IQAdShareValue / MillionD);
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = fLocalMediaValue;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sLocalMediaValue = "NA";
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(newsMediaModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = newsMediaModel.Publication.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }
                                            
            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportNM_@item.ID" value="@item.ID" style="display:none"  />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        @if (newsMediaModel.IQLicense == 3)
                        {
                            <img src="@String.Format(mediaIconFormat, "LexisNexis_Small.png")" title="LexisNexis(R)" alt="LexisNexis(R)" class="lexisNexisImg" />
                        }
                        <a href="@(newsMediaModel.IQLicense > 0 ? Url.Action("Index", "Article", new { au = CommonFunctions.EncryptLicenseStringAES(sessionInformation.CustomerKey + "¶Library Report¶" + newsMediaModel.Url + "&u1=cliq40&u2=" + sessionInformation.ClientID + "¶" + newsMediaModel.IQLicense) }) : newsMediaModel.Url)" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((newsMediaModel.NegativeSentiment * 6) > 25 ? 25 : (newsMediaModel.NegativeSentiment * 6))px;'>
                                                    @newsMediaModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((newsMediaModel.PositiveSentiment * 6) > 25 ? 25 : (newsMediaModel.PositiveSentiment * 6))px;'>
                                                    @newsMediaModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            @if (Decimal.Compare(Convert.ToDecimal(newsMediaModel.IQAdShareValue), -1M) != 0 && newsMediaModel.Compete_Audience != -1 && sessionInformation.IsCompeteData)
                            {
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowAudience)
                                    { 
                                        <div class="view" title="Local Audience @fLocalAudience">
                                            @sLocalAudience
                                            @if (!string.IsNullOrWhiteSpace(newsMediaModel.Compete_Result) && newsMediaModel.Compete_Result.ToUpper() == "A")
                                            {
                                                <img title="Powered by Compete" class="competeIcon" src="~/Images/compete.png" alt="Compete Image" />
                                            }
                                        </div>
                                    }
                                </div>
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowMediaValue)
                                    { 
                                        <div class="price" title="Local Media Value @fLocalMediaValue">
                                            @sLocalMediaValue
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>
                          
                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.PM:
                                                                                                                                                            IQArchive_ArchiveBLPMModel PMModel = item.MediaData as IQArchive_ArchiveBLPMModel;
                                                                                                                                                            string PMBasePath = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["IQArchieve_PMBaseUrl"]);
                                                                                                                                                            string fCirculation = string.Format("{0:N0}", PMModel.Circulation);
                                                                                                                                                            string sCirculation = string.Empty;

                                                                                                                                                            if (PMModel.Circulation >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sCirculation = string.Format("{0:F1} bil", PMModel.Circulation / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (PMModel.Circulation >= Million)
                                                                                                                                                            {
                                                                                                                                                                sCirculation = string.Format("{0:F1} mil", PMModel.Circulation / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sCirculation = fCirculation;
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(PMModel.Pub_Name))
                                                                                                                                                            {
                                                                                                                                                                fPub = PMModel.Pub_Name.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }
                                            
            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportPM_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@(PMBasePath + PMModel.FileLocation.Replace(@"\", @"/"))" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        <div class="viewcontentdetail">
                            <div class="viewlongdetail">
                                @if (report.ReportDetails.Settings.ShowAudience)
                                {
                    <div class="circulation pull-left" title="Circulation @fCirculation">
                        <span>@sCirculation</span>
                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a class="cursorPointer editArticle" title="Edit Record" id="aEdit_@item.ID" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>
                            
                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.SocialMedia:
                                                                                                                                                            IQArchive_ArchiveSMModel socialMediaModel = item.MediaData as IQArchive_ArchiveSMModel;

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(socialMediaModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = socialMediaModel.Publication.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportSM_@item.ID" value="@item.ID"  style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@socialMediaModel.Url" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        {
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((socialMediaModel.NegativeSentiment * 6) > 25 ? 25 : (socialMediaModel.NegativeSentiment * 6))px;'>
                                                    @socialMediaModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((socialMediaModel.PositiveSentiment * 6) > 25 ? 25 : (socialMediaModel.PositiveSentiment * 6))px;'>
                                                    @socialMediaModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.Forum:
                                                                                                                                                            IQArchive_ArchiveSMModel forumModel = item.MediaData as IQArchive_ArchiveSMModel;

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(forumModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = forumModel.Publication.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportForum_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@forumModel.Url" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        {
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((forumModel.NegativeSentiment * 6) > 25 ? 25 : (forumModel.NegativeSentiment * 6))px;'>
                                                    @forumModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((forumModel.PositiveSentiment * 6) > 25 ? 25 : (forumModel.PositiveSentiment * 6))px;'>
                                                    @forumModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.Blog:
                                                                                                                                                            IQArchive_ArchiveSMModel blogModel = item.MediaData as IQArchive_ArchiveSMModel;

                                                                                                                                                            if (blogModel.Compete_Audience.HasValue && blogModel.Compete_Audience > 0)
                                                                                                                                                            {
                                                                                                                                                                fLocalAudience = string.Format("{0:N0}", blogModel.Compete_Audience);

                                                                                                                                                                if (blogModel.Compete_Audience >= Billion)
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = string.Format("{0:F1} bil", blogModel.Compete_Audience / BillionD);
                                                                                                                                                                }
                                                                                                                                                                else if (blogModel.Compete_Audience >= Million)
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = string.Format("{0:F1} mil", blogModel.Compete_Audience / MillionD);
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sLocalAudience = fLocalAudience;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sLocalAudience = "NA";
                                                                                                                                                            }

                                                                                                                                                            if (blogModel.IQAdShareValue.HasValue && blogModel.IQAdShareValue > 0)
                                                                                                                                                            {
                                                                                                                                                                fLocalMediaValue = string.Format("{0:N2}", blogModel.IQAdShareValue);

                                                                                                                                                                if (blogModel.IQAdShareValue >= BillionD)
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = string.Format("{0:F1} bil", blogModel.IQAdShareValue / BillionD);
                                                                                                                                                                }
                                                                                                                                                                else if (blogModel.IQAdShareValue >= MillionD)
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = string.Format("{0:F1} mil", blogModel.IQAdShareValue / MillionD);
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sLocalMediaValue = fLocalMediaValue;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sLocalMediaValue = "NA";
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(blogModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = blogModel.Publication.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportBlog_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@blogModel.Url" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        {
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((blogModel.NegativeSentiment * 6) > 25 ? 25 : (blogModel.NegativeSentiment * 6))px;'>
                                                    @blogModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((blogModel.PositiveSentiment * 6) > 25 ? 25 : (blogModel.PositiveSentiment * 6))px;'>
                                                    @blogModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            @if (Decimal.Compare(Convert.ToDecimal(blogModel.IQAdShareValue), -1M) != 0 && blogModel.Compete_Audience != -1 && sessionInformation.IsCompeteData)
                            {
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowAudience)
                                    {
                                        <div class="view" title="Local Audience @fLocalAudience">
                                            @sLocalAudience
                                            @if (!string.IsNullOrWhiteSpace(blogModel.Compete_Result) && blogModel.Compete_Result.ToUpper() == "A")
                                            {
                                                <img title="Powered by Compete" class="competeIcon" src="~/Images/compete.png" alt="Compete Image" />
                                            }
                                        </div>
                                    }
                                </div>
                                <div class="viewshortdetail">
                                    @if (report.ReportDetails.Settings.ShowMediaValue)
                                    {
                                        <div class="price" title="Local Media Value @fLocalMediaValue">
                                            @sLocalMediaValue
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.FB:
                                        case CommonFunctions.CategoryType.IG:
                                                                                                                                                            IQArchive_ArchiveSMModel fbModel = item.MediaData as IQArchive_ArchiveSMModel;
                                                                                                                                                            string contentClass = item.SubMediaType == CommonFunctions.CategoryType.IG ? "ReportContentVideo" : "ReportContentNone";
                                                                                                                                                            string videoSpacer = item.SubMediaType == CommonFunctions.CategoryType.IG ? "FeedsVideoSpacer" : string.Empty;

                                                                                                                                                            string fLikes = string.Format("{0:N0}", fbModel.ArticleStats.Likes);
                                                                                                                                                            string sLikes = string.Empty;

                                                                                                                                                            if (fbModel.ArticleStats.Likes >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sLikes = string.Format("{0:F1} bil", fbModel.ArticleStats.Likes / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (fbModel.ArticleStats.Likes >= Million)
                                                                                                                                                            {
                                                                                                                                                                sLikes = string.Format("{0:F1} mil", fbModel.ArticleStats.Likes / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sLikes = fLikes;
                                                                                                                                                            }

                                                                                                                                                            string fComments = string.Format("{0:N0}", fbModel.ArticleStats.Comments);
                                                                                                                                                            string sComments = string.Empty;

                                                                                                                                                            if (fbModel.ArticleStats.Comments >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sComments = string.Format("{0:F1} bil", fbModel.ArticleStats.Comments / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (fbModel.ArticleStats.Comments >= Million)
                                                                                                                                                            {
                                                                                                                                                                sComments = string.Format("{0:F1} mil", fbModel.ArticleStats.Comments / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sComments = fComments;
                                                                                                                                                            }

                                                                                                                                                            string fShares = string.Format("{0:N0}", fbModel.ArticleStats.Shares);
                                                                                                                                                            string sShares = string.Empty;

                                                                                                                                                            if (fbModel.ArticleStats.Shares >= Billion)
                                                                                                                                                            {
                                                                                                                                                                sShares = string.Format("{0:F1} bil", fbModel.ArticleStats.Shares / BillionD);
                                                                                                                                                            }
                                                                                                                                                            else if (fbModel.ArticleStats.Shares >= Million)
                                                                                                                                                            {
                                                                                                                                                                sShares = string.Format("{0:F1} mil", fbModel.ArticleStats.Shares / MillionD);
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                sShares = fShares;
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(fbModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = fbModel.Publication.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @sessionInformation.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right @videoSpacer">
                    @if (item.SubMediaType == CommonFunctions.CategoryType.IG)
                    {
                        <div class="FeedsVideo positionRelative float-left">
                            <img class="instagramIMG" src="@fbModel.ThumbUrl" />
                        </div>
                    }
                    <div class="float-right">
                        <input type="checkbox" id="chkReportForum_@item.ID" value="@item.ID" style="display:none" />
                    </div>
                </div>
                <div class="@contentClass">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@fbModel.Url" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        {
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((fbModel.NegativeSentiment * 6) > 25 ? 25 : (fbModel.NegativeSentiment * 6))px;'>
                                                    @fbModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((fbModel.PositiveSentiment * 6) > 25 ? 25 : (fbModel.PositiveSentiment * 6))px;'>
                                                    @fbModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            @if (fbModel.ArticleStats != null)
                            { 
                                <div class="viewshortdetail">
                                    <div class="likes" title="Likes @fLikes">
                                        @sLikes
                                    </div>
                                </div>
                                <div class="viewshortdetail">
                                    <div class="comments" title="Comments @fComments">
                                        @sComments
                                    </div>
                                </div>
                                <div class="viewshortdetail">
                                    @if (item.SubMediaType == CommonFunctions.CategoryType.FB)
                                    {
                                        <div class="shares" title="Shares @fShares">
                                            @sShares
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.Radio:
                                                                                                                                                            IQArchive_ArchiveTVEyesModel tvEyesModel = item.MediaData as IQArchive_ArchiveTVEyesModel;
                                                                                                                                                            Month = tvEyesModel.LocalDateTime != null ? tvEyesModel.LocalDateTime.ToString("MMM", System.Globalization.CultureInfo.InvariantCulture) : string.Empty;
                                                                                                                                                            Day = tvEyesModel.LocalDateTime != null ? tvEyesModel.LocalDateTime.Day.ToString() : string.Empty;
                                                                                                                                                            Time = tvEyesModel.LocalDateTime != null ? tvEyesModel.LocalDateTime.ToString("hh:mm tt") : string.Empty;

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(tvEyesModel.Market))
                                                                                                                                                            {
                                                                                                                                                                fPub = tvEyesModel.Market.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @tvEyesModel.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right FeedsVideoSpacer">
                    <div class="float-left FeedsVideo positionRelative">
                        <a id="aPlay_@item.ID" class="cursorPointer" onclick="LoadTMPopup('@item.ArchiveMediaID')">
                            <img class="media-object" src="~/images/video.png" alt="" />
                        </a>
                    </div>
                    <div class="float-right">
                        <input type="checkbox" id="chkReportTM_@item.ID" value="@item.ID" style="display:none" />
                    </div>
                </div>
                <div class="ReportContentVideo">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        @Html.Raw(sTitle)
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body tmStationDiv">
                        <span style="color:#73897F">@tvEyesModel.StationID</span>
                        @if (!string.IsNullOrEmpty(displayText))
                        {
                            <span> - @Html.Raw(displayText)</span>
                        }
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTM_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((tvEyesModel.NegativeSentiment * 6) > 25 ? 25 : (tvEyesModel.NegativeSentiment * 6))px;'>
                                                    @tvEyesModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((tvEyesModel.PositiveSentiment * 6) > 25 ? 25 : (tvEyesModel.PositiveSentiment * 6))px;'>
                                                    @tvEyesModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            <div class="viewlongdetail">
                    @if (!string.IsNullOrEmpty(tvEyesModel.DMARank))
                    {
                        <div class="marketrank pull-left" title="Market Rank @tvEyesModel.DMARank">
                            <span>@tvEyesModel.DMARank</span>
                        </div>
                    }
                    else
                    {
                        <div align="center" class="margintop2"></div>
                    }
                            </div>
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.MS:
                                                                                                                                                            IQArchive_ArchiveMiscModel miscModel = item.MediaData as IQArchive_ArchiveMiscModel;
                                                                                                                                                            Month = miscModel.CreateDT.ToString("MMM", System.Globalization.CultureInfo.InvariantCulture);
                                                                                                                                                            Day = miscModel.CreateDT.Day.ToString();
                                                                                                                                                            Time = miscModel.CreateDT.ToString("hh:mm tt");

                                                                                                                                                            string catimg = string.Empty;
                                                                                                                                                            string tooltip = string.Empty;
                                                                                                                                                            switch (miscModel.FileType)
                                                                                                                                                            {
                                                                                                                                                                case CommonFunctions.IQUGCMediaTypes.Doc:
                                                                                                                                                                    catimg = "word.png";
                                                                                                                                                                    tooltip = "Document";
                                                                                                                                                                    break;
                                                                                                                                                                case CommonFunctions.IQUGCMediaTypes.Excel:
                                                                                                                                                                    catimg = "excel.png";
                                                                                                                                                                    tooltip = "Spreadsheet";
                                                                                                                                                                    break;
                                                                                                                                                                case CommonFunctions.IQUGCMediaTypes.Pdf:
                                                                                                                                                                    catimg = "pdf.png";
                                                                                                                                                                    tooltip = "PDF";
                                                                                                                                                                    break;
                                                                                                                                                                case CommonFunctions.IQUGCMediaTypes.Image:
                                                                                                                                                                    catimg = "image.png";
                                                                                                                                                                    tooltip = "Image";
                                                                                                                                                                    break;
                                                                                                                                                                default:
                                                                                                                                                                    catimg = string.Empty;
                                                                                                                                                                    break;
                                                                                                                                                            }
                                            
            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @miscModel.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="/images/MediaIcon/@catimg" title="@tooltip" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportMisc_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a href="@miscModel.MediaUrl" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>

                                                                                                                                                            break;
                                        case CommonFunctions.CategoryType.PQ:
                                                                                                                                                            IQArchive_ArchivePQModel pqModel = item.MediaData as IQArchive_ArchivePQModel;
                                                                                                                                                            string authors = String.Empty;

                                                                                                                                                            if (pqModel.Authors != null && pqModel.Authors.Count > 0)
                                                                                                                                                            {
                                                                                                                                                                authors = "(" + (pqModel.Authors.Count > 2 ? String.Join(", ", pqModel.Authors.Take(2)) : String.Join(", ", pqModel.Authors)) + ") ";
                                                                                                                                                            }

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(pqModel.Publication))
                                                                                                                                                            {
                                                                                                                                                                fPub = pqModel.Publication.Trim() + " " + authors;

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }

            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">&nbsp;</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@objSubMediaType.MediaIconPath" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right">
                    <input type="checkbox" id="chkReportPQ_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentNone">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        <a class="cursorPointer" href="javascript:void(0);" onclick="ShowViewArticleLibrary('@item.ID');" target="_blank">
                            @Html.Raw(sTitle)
                        </a>
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        @Html.Raw(displayText)
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((pqModel.NegativeSentiment * 6) > 25 ? 25 : (pqModel.NegativeSentiment * 6))px;'>
                                                    @pqModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((pqModel.PositiveSentiment * 6) > 25 ? 25 : (pqModel.PositiveSentiment * 6))px;'>
                                                    @pqModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>
                                
                                                                                                                                                            break;

                                        case CommonFunctions.CategoryType.IQRadio:
                                                                                                                                                            IQArchive_ArchiveRadioModel RadioModel = item.MediaData as IQArchive_ArchiveRadioModel;

                                                                                                                                                            Month = RadioModel.LocalDateTime != null ? RadioModel.LocalDateTime.ToString("MMM", System.Globalization.CultureInfo.InvariantCulture) : string.Empty;
                                                                                                                                                            Day = RadioModel.LocalDateTime != null ? RadioModel.LocalDateTime.Day.ToString() : string.Empty;
                                                                                                                                                            Time = RadioModel.LocalDateTime != null ? RadioModel.LocalDateTime.ToString("hh:mm tt") : string.Empty;

                                                                                                                                                            if (!string.IsNullOrWhiteSpace(@RadioModel.Market))
                                                                                                                                                            {
                                                                                                                                                                fPub = RadioModel.Market.Trim();

                                                                                                                                                                if (fPub.Length > 23)
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub.Substring(0, 21) + "...";
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    sPub = fPub;
                                                                                                                                                                }
                                                                                                                                                            }
                                            
            <div id="divMedia_@item.ID" class="media reportMedia draggable">
                <div class="MediaDate">
                    <div class="post-date">
                        <span class="month">@Month</span>
                        <div>
                            <span class="today">@Day</span>
                        </div>
                        <span class="timeWithTimeZone">@Time @RadioModel.TimeZone</span>
                    </div>
                </div>
                <div class="MediaTypeLogo">
                    <img src="@RadioModel.StationLogo" title="@objSubMediaType.DisplayName" />
                </div>
                <div class="float-right FeedsVideoSpacer">
                    <div class="FeedsVideo positionRelative float-left">
                        <a id="aPlay_@item.ID" class="cursorPointer" onclick="LoadClipPlayer('@RadioModel.ClipGuid');">
                            <img csrc="~/images/video.png" class="maxwidth130" alt="thumb url" />
                        </a>
                    </div>
                    <input type="checkbox" id="chkReportIQRadio_@item.ID" value="@item.ID" style="display:none" />
                </div>
                <div class="ReportContentVideo">
                    <div class="media-heading float-left" title="@Html.Raw(fTitle)">
                        @Html.Raw(sTitle)
                    </div>
                    <div class="subheading float-left margintop1">
                        @item.timeDifference
                    </div>
                    <div class="clear float-left media-body">
                        <span style="color:#73897F">@RadioModel.StationID</span>
                        @if (!string.IsNullOrWhiteSpace(displayText))
                        {
                            <span> - @Html.Raw(displayText)</span>
                        }
                    </div>
                </div>
                <div class="clear post-divider"></div>
                <div class="clear margintop2 marginbottom2">
                    <div class="ReportActionBarLeftDiv">
                        <div class="viewmore" style="min-height: 1px"></div>
                        <div class="viewlocation">
                            @if (!string.IsNullOrWhiteSpace(fPub))
                            {
                                <div class="location-tag" title="@fPub">
                                    @sPub
                                </div>
                            }
                            else
                            { 
                                <div class="margintop2"></div>
                            }
                        </div>
                        @if (report.ReportDetails.Settings.ShowSentiment)
                        { 
                            <div id="divSentimentTV_@item.ID" class="viewsentiment" title="Sentiment">
                                <div class="sentimentLeftFloat sentiment-tag">
                                    <div class="divSentimentMain sentimentFont">
                                        <div class="divSentimentMain">
                                            <div class="divSentimentNeg">
                                                <div style='width:@((RadioModel.NegativeSentiment * 6) > 25 ? 25 : (RadioModel.NegativeSentiment * 6))px;'>
                                                    @RadioModel.NegativeSentiment
                                                </div>
                                            </div>
                                            <div class="divSentimentPos">
                                                <div style='width:@((RadioModel.PositiveSentiment * 6) > 25 ? 25 : (RadioModel.PositiveSentiment * 6))px;'>
                                                    @RadioModel.PositiveSentiment
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="viewcontentdetail">
                            <div class="marketrank pull-left" title="Market Rank @RadioModel.DMARank">
                                <span>@RadioModel.DMARank</span>
                            </div>
                        </div>
                    </div>
                    <div class="ReportActionBarRightDiv">
                        <div style="float: right">
                            <div class="detailIcon">
                                <a id="aEdit_@item.ID" class="cursorPointer editArticle" title="Edit Record" href="javascript:void(0);" onclick="OpenEditRecord('@item.ID', 'report');"></a>
                            </div>
                            <div class="rightPad"></div>
                        </div>
                    </div>
                </div>
            </div>
                                                                                                                                                            break;
                                    }
                                }
                            </div>
                            }
                        }
                }
            }
        </div>
    }
    else
    {
        <div>
            @IQMedia.WebApplication.Config.ConfigSettings.Settings.ReportGenerationProgress
        </div>
    }
</div>
