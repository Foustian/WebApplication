@using IQMedia.Shared.Utility
@using IQMedia.Model;
@using IQMedia.WebApplication.Models.TempData;
@using IQCommon.Model;
@{
    ViewBag.Title = "iQ media Feeds";

    List<String> FilterMediaDate = new List<String>();
    List<string> lstMediums = new List<string>();
    List<IQ_MediaTypeModel> MasterMediaTypes = new List<IQ_MediaTypeModel>();
    List<string> exludedRecords = new List<string>();
    var fDate = string.Empty;
    var tDate = string.Empty;
    var defaultToUnread = 0;
    if (Model != null && Model["FeedFilter"] != null && Model["FeedFilter"].FilterMediaDate != null)
    {
        FilterMediaDate = Model["FeedFilter"].FilterMediaDate;
    }
    if (Model != null && Model["Medium"] != null)
    {
        lstMediums = Model["Medium"];
    }
    if (Model != null && Model["MasterMediaTypes"] != null)
    {
        MasterMediaTypes = Model["MasterMediaTypes"];
    }
    if (Model != null && Model["ExcludedIDs"] != null)
    {
        exludedRecords = Model["ExcludedIDs"];
    }

    FeedsTempData feedsTempData = ((IQMedia.WebApplication.Controllers.FeedsController)this.ViewContext.Controller).GetTempData();
    if (!string.IsNullOrEmpty(Request.QueryString["date"]) || !string.IsNullOrEmpty(Request.QueryString["mediatype"]) || !string.IsNullOrEmpty(Request.QueryString["submediatype"]) || !string.IsNullOrEmpty(Request.QueryString["fromDate"]))
    {
        Layout = null;
	<!doctype html>
    
    <script src="~/Scripts/jquery-1.9.1.min.js?v=1.0" type="text/javascript"></script>
    <script src="~/Scripts/jquery.placeholder.min.js?v=1.0" type="text/javascript"></script>
    <link href="~/Css/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="../../Css/Fonts.css" rel="stylesheet" type="text/css" />
    <link href="~/Css/jquery.mCustomScrollbar.css?v=1.0" rel="stylesheet" type="text/css" />
    <link href="~/Css/jquery.mCustomScrollbar.custom.css?v=1.0" rel="stylesheet" type="text/css" />
    <!-- Le styles -->
    <link href="~/Css/bootstrap.css" rel="stylesheet" type="text/css" />
    <!-- Customizable CSS -->
    <link href="~/Css/feed.css?v=4.2" rel="stylesheet" type="text/css" />
    <link href="~/Css/MasterInner.css" rel="stylesheet" type="text/css" />

    <script src="~/Scripts/jquery-ui.min.js?v=1.0" type="text/javascript"></script>
    <script src="~/Scripts/ConstantScript.js?v=1.6" type="text/javascript"></script>
    <script src="~/Scripts/IQMediaCommon.js?v=3.0" type="text/javascript"></script>
    
    <script type ="text/javascript" >
        var _urlVideoMetaData = '@System.Configuration.ConfigurationManager.AppSettings["UrlGetVideoMetaData"]';
        var _urlVideoNielsenData = '@System.Configuration.ConfigurationManager.AppSettings["UrlGetVideoNielSenData"]';
        var _urlVideoThumb = '@System.Configuration.ConfigurationManager.AppSettings["UrlGenerateVideoRawMediaThumb"]';
        var _urlVideoCategory = '@System.Configuration.ConfigurationManager.AppSettings["UrlGetVideoCategoryData"]';
        var _urlVideoCreateClip = '@System.Configuration.ConfigurationManager.AppSettings["UrlCreateMediaClip"]';
        var _urlClipThumbgen = '@System.Configuration.ConfigurationManager.AppSettings["UrlGenerateMediaClipThumbnail"]';
        var _urlClipExport = '@System.Configuration.ConfigurationManager.AppSettings["UrlExportMediaClip"]';
        var _urlClipIOSExport = '@System.Configuration.ConfigurationManager.AppSettings["UrlExportIOSMediaClip"]';
        var _urlClipTimeSync = '@System.Configuration.ConfigurationManager.AppSettings["UrlClipTimeSync"]';
    </script>
    
    <style type="text/css">
        body
        {
            /*padding-top: 59px;*/ /*padding-bottom: 40px;*/
            padding: 0px !important;
            font-family: 'Open Sans';
        }
        
        .container
        {
            width: 100% !important;
        }
        
        .container_custom
        {
            margin-top: 0px;
        }
        
        .minheight500
        {
            height: 100%;
        }
    </style>
    <!--[if IE 7]>
	<style>
	.container {
	width:1280px;
	}
	.btn-group {
	float:left;
	}
	
	.action {
	float:right;
	}
	.media-heading {
	width:95%;
	display:block;
	}
	</style>
<!--<![endif]-->
    <!--[if IE 8]>
<style>
	.container {
		width:1280px;
	}
	.media-heading {
	width:90%;
	}
</style>
<!--<![endif]-->
    <link href="~/Css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
	  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js?v=1.0"></script>
      <script src="~/Scripts/respond.min.js"></script>
	<!--<![endif]-->
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png" />    
    <div id="divConfirmationPopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgCloudUGCFTPUploadPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="CancelCloudUGCFTPUploadPopup();" /></div>
        <div style="padding: 20px;">
            <div class="modalpopheadertitle">
                Delete Confirmation</div>
            <div class="divconfirmationpop-content">
            </div>
            <div class="divconfirmationpop-buttons">
                <button type="button" button-type="cancel" class="cancelButton">
                    Cancel</button>
                <button type="button" button-type="ok" id="btnConfirmationPopupOK" class="button">
                    OK</button>
            </div>
        </div>
    </div>
    }
    else
    {
        Layout = "~/Views/Shared/_IQMediaMasterInner.cshtml";
    }
}
@{
    
    IQMedia.Model.ActiveUser sessionInformation = IQMedia.WebApplication.Utility.ActiveUserMgr.GetActiveUser();
}
<script src="~/Scripts/FeedsScript.js?v=4.9" type="text/javascript"></script>
<script type="text/javascript" src="~/Scripts/VideoPlayer.js?v=1.23"></script>
<script src="~/Scripts/VideoPlayerChart.js?v=1.3" type="text/javascript"></script>
<link href="~/Css/video-player.css?v=1.3" rel="stylesheet" type="text/css" />
<script src="~/Scripts/enscroll.js?v=1.0" type="text/javascript"></script>
<script src="~/Scripts/ArticleScript.js?v=1.4" type="text/javascript"></script>
<script src="~/Scripts/highcharts.js?v=1.1" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="~/Scripts/jquery-ui-timepicker-addon.js?v=1.0"></script>
<style type="text/css">
    #ui-datepicker-div
    {
        z-index: 1050 !important;
    }
    .ui-timepicker-div .ui-widget-header
    {
        margin-bottom: 8px;
    }
    .ui-timepicker-div dl
    {
        text-align: left;
    }
    .ui-timepicker-div dl dt
    {
        height: 33px;
        margin-bottom: -25px;
    }
    .ui-timepicker-div dl dd
    {
        margin: 0 10px 10px 65px;
    }
    .ui-timepicker-div td
    {
        font-size: 90%;
    }
    .ui-tpicker-grid-label
    {
        background: none;
        border: none;
        margin: 0;
        padding: 0;
    }
    
    .ui-timepicker-rtl
    {
        direction: rtl;
    }
    .ui-timepicker-rtl dl
    {
        text-align: right;
    }
    .ui-timepicker-rtl dl dd
    {
        margin: 0 65px 10px 10px;
    }
    .prominenceLabel
    {
        display: inline;
        margin-left: 5px;
    }
    .alignLeft
    {
        text-align:left;
    }
    .font13
    {
        font-size:13px;
    }
</style>
@if (ViewBag.IsSuccess)
{
    fDate = Model["FromDate"];
    tDate = Model["ToDate"];
    defaultToUnread = Model["DefaultToUnread"];

    // This should be done after the document.ready function in FeedsScript.js
    if (lstMediums != null && lstMediums.Count > 0)
    {        
    <script type="text/javascript">
        $(document).ready(function () {
            _SubMediaTypes = ['@Html.Raw(string.Join("', '", @lstMediums))'];
            SetActiveFilter();
        });
    </script>
    }
    if (exludedRecords != null && exludedRecords.Count > 0)
    {
        <script type="text/javascript">
            $(document).ready(function () {
                _excludedIDs = ['@Html.Raw(string.Join("', '", @exludedRecords))'];
                DisableExcludedRecords(_excludedIDs);
            });
        </script>
    }
    <script type="text/javascript">
        _fromDate = '@fDate';
        _toDate = '@tDate';
        _MasterMediaTypes = [@Html.Raw(string.Join(", ", MasterMediaTypes.Where(w => w.TypeLevel == 2).Select(s => "['" + s.MediaType + "','" + s.SubMediaType + "','" + s.DisplayName + "']").ToArray()))];

        var disabledDays = ['@Html.Raw(string.Join("', '", @FilterMediaDate.Select(f => Convert.ToDateTime(f).ToString("MM/dd/yyyy")).ToArray()))'];
        var _clipLimit = @Model["ManualClipDuration"];
        var rootFolderName = '@System.Configuration.ConfigurationManager.AppSettings["ClientRootFolderName"]'
        var _IsShowMTChart = true; /* Indicates that the video player should display the chart containing MarTek data */

        var _PlaySecondsSetting = @Model["RawMediaPauseSecs"]

        // commented for now, uncomment below if need to pause by absolute time
        //var _RawPlaySeconds = @Model["RawMediaPauseSecs"]
        //var _PlaySecondsSetting =0;

        //['12-25-2012', '01-01-2013'];    
        function enableAllTheseDays(date) {

            date = $.datepicker.formatDate('mm/dd/yy', date);

            return [$.inArray(date, disabledDays) !== -1];
        }

        $(function () {
            $("#txtArticleGMTDate").datetimepicker({
                timeFormat: "hh:mm:ss tt"
            });
        });

        if ('@defaultToUnread' == '1')
        {
            _IsRead = false;
        }
    </script>
}
<div class="container container_custom">
    <div class="row-fluid" id="divRowFluid">
        @if (ViewBag.IsSuccess)
        {
            <div class="span3 minheight500" id="divQuickFeedFinder">
                <div class="well sidebar-nav">
                    @*<a href="#" id="divSaveTweet" class="btn btn-success" rel="popover"> hover for popover</a>*@
                    <h5>
                        Quick Feed Finder</h5>
                    <input type="text" class="keywordTetBox" placeholder="Keyword" id="txtKeyword" /><img
                        id="imgKeyword" title="Search" src="../../Images/magnifier.png" class="imgsearch" />
                    <input type="text" id="dpFrom" readonly="readonly" class="date" />
                    <input type="text" id="dpTo" readonly="readonly" class="date" />
                    <a onclick="clearDate();" class="clearDate" title="Refresh Date">
                        <img src="../../Images/Refresh.png" alt="Refresh" /></a>
                    <br />
                    <br />
                    <h5>
                        Narrow Results</h5>
                    <div class="navbar">
                        <ul id="narrowResultsMenu" role="navigation" class="nav floatNone sideMenuUl width100p">
                            <li class="dropdown ndate"><a data-toggle="dropdown" class="dropdown-toggle" onclick="toggleDiv('ulCalender')" role="button"
                                href="#" id="drop1">Date<span class="spnArrow">&nbsp;</span></a>
                                <ul id="ulCalender" aria-labelledby="drop1" role="menu" class="dropdown-menu sideMenu ulCalenderFilter hideDiv">
                                    <li role="presentation">
                                        <div id="divCalender">
                                        </div>
                                </ul>
                            </li>
                            <li class="nagent"><a data-toggle="dropdown" class="dropdown-toggle" role="button"
                                id="liAgentFilter" href="#" onclick="toggleDiv('ulAgent')">Agent<span class="spnArrow">&nbsp;</span></a>
                                <ul aria-labelledby="liAgentFilter" role="menu" class="nav nav-stacked nav-dropdpwn top20 hideDiv"
                                    id="ulAgent">
                                    @{
            List<IQMedia.Model.SearchRequestFilter> list = new List<IQMedia.Model.SearchRequestFilter>();

            if (Model != null && Model["FeedFilter"] != null && Model["FeedFilter"].ListOfSearchRequestFilter != null)
            {
                list = (List<IQMedia.Model.SearchRequestFilter>)(Model["FeedFilter"].ListOfSearchRequestFilter);
            }

            if (list.Count > 0)
            {
                                        <li role="presentation" id="liAgentSearch" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu">
                                                <li role="presentation" style="text-align: right">
                                                    <div>
                                                        <input type="button" value="Done" id="btnSearchAgent" class="button" style="margin: 0px;
                                                            padding: 2px; min-width: 40px;" onclick="SearchAgent();">
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                        <li role="presentation" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu" id="ulAgentList">
                                                @foreach (IQMedia.Model.SearchRequestFilter item in list)
                                                {
                                                    <li role="presentation" onclick="SetQueryName(this,'@item.QueryName.Replace("\'", "\\\'")',@item.ID);"
										class="cursorPointer"><a tabindex="-1" role="menuitem">@( item.QueryName + " (" + item.CountFormatted + ")")</a>
                                                    </li>
                                                }
                                            </ul>
                                        </li>
									
                                                var json = Newtonsoft.Json.JsonConvert.SerializeObject(list);
                                        <script type="text/javascript"> _CurrentRequestFilter = @Html.Raw(json); </script>
            }
            else
            {
                                                        <li role="presentation" id="liAgentSearch" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu">
                                                <li role="presentation" style="text-align: right">
                                                    <div>
                                                        <input type="button" value="Done" id="btnSearchAgent" class="button" style="margin: 0px;
                                                            padding: 2px; min-width: 40px;" onclick="SearchAgent();">
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                        <li role="presentation" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu" id="ulAgentList">
                                                <li role="presentation" class="cursorPointer"><a tabindex="-1" role="menuitem">Loading...</a></li>
                                            </ul>
                                        </li>
            }

                                    }
                                </ul>
                            </li>
                            <li class="dropdown nmedium">
                                <a data-toggle="dropdown" class="dropdown-toggle" role="button" id="A1" href="#" onclick="toggleDiv('ulMedium')">Medium<span class="spnArrow">&nbsp;</span></a>
                                <ul aria-labelledby="drop2" role="menu" class="dropdown-menu multi-level sideMenu hideDiv" id="ulMedium" style="overflow-y:visible;">
                                    <li role="presentation"><a tabindex="-1" role="menuitem">Loading...</a></li>
                                </ul>
                            </li>
                            <li class="dropdown nsentiment"><a class="dropdown-toggle"
                                role="button" id="A2" href="#" onclick="toggleDiv('ulSentiment')">Sentiment<span class="spnArrow">&nbsp;</span></a>
                                <ul aria-labelledby="drop2" role="menu" class="nav-dropdpwn sideMenu paddingBottom10 hideDiv" id="ulSentiment">
                                    @{ 
            bool isFilterAvailable = false;
            if (Model != null && Model["FeedFilter"] != null && Convert.ToInt64(Model["FeedFilter"].NegativeSentiment) > 0)
            {
                isFilterAvailable = true;
                                        <li role="presentation" onclick="SetSentiment(-1);"><a href="#" tabindex="-1" role="menuitem">
                                            <div id="divSentiment_Neg" class="clear">
                                                <div class="right" id="divSentimentR width100p">
                                                    <div class="divSentimentMain width100p">
                                                        <div class="divSentimentNeg width50p">
                                                            <div class="width74">
                                                                &nbsp;</div>
                                                        </div>
                                                        <div class="divSentimentPos">
                                                            <div class="width0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a></li> @("(" + Model["FeedFilter"].NegativeSentimentFormatted + ")")
            }

            if (Model != null && Model["FeedFilter"] != null && Convert.ToInt64(Model["FeedFilter"].PositiveSentiment) > 0)
            {
                isFilterAvailable = true;
                                        <li role="presentation" onclick="SetSentiment(1);"><a href="#" tabindex="-1" role="menuitem">
                                            <div id="divSentiment_Pos" class="clear">
                                                <div class="right" id="divSentimentG width100p">
                                                    <div class="divSentimentMain width100p">
                                                        <div class="divSentimentNeg width50p">
                                                            <div class="width0">
                                                                &nbsp;
                                                            </div>
                                                        </div>
                                                        <div class="divSentimentPos width50p">
                                                            <div class="width74">
                                                                &nbsp;</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a></li>@("(" + Model["FeedFilter"].PositiveSentimentFormatted + ")")
            }

            if (Model != null && Model["FeedFilter"] != null && Convert.ToInt64(Model["FeedFilter"].NullSentiment) > 0)
            {
                isFilterAvailable = true;
                                        <li role="presentation" onclick="SetSentiment(0);"><a href="#" tabindex="-1" role="menuitem">
                                            <div id="divSentiment_Neutral" class="clear">
                                                <div class="right" id="divSentimentN width100p">
                                                    <div class="divSentimentMain width100p">
                                                        <div class="divSentimentNeg width50p">
                                                            <div class="width0">
                                                                &nbsp;
                                                            </div>
                                                        </div>
                                                        <div class="divSentimentPos">
                                                            <div class="width0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a></li>@("(" + Model["FeedFilter"].NullSentimentFormatted + ")")

            }

            if (!isFilterAvailable)
            {
                                        <li role="presentation" onclick="SetSentiment(0);"><a href="#" tabindex="-1" role="menuitem">
                                            Loading...</a></li>
            }
        }
                                </ul>
                            </li>        
            @{
            if (feedsTempData.UseProminence.HasValue && feedsTempData.UseProminence.Value)
            {     
                        <li class="nprominence"><a data-toggle="dropdown" class="dropdown-toggle" role="button"
                            id="liProminenceFilter" href="#" onclick="toggleDiv('ulProminence')">Weight<span class="spnArrow">&nbsp;</span></a>
                            <ul aria-labelledby="liProminenceFilter" role="menu" class="nav nav-stacked nav-dropdpwn top65 hideDiv"
                                id="ulProminence">  
                                    <li role="presentation" id="liProminenceSearch" style="padding: 0px;">
                                        <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu">
                                            <li role="presentation" style="text-align:right; height:50px;">
                                                <span class="float-left" style="margin-top:-6px;">
                                                    <div class="alignLeft">
                                                        <input type="radio" id="rdoProminenceMultiplier" name="Prominence" style="margin-top:-2px;" checked="checked" onclick="SetProminenceType()" />
                                                        <label class="font13 prominenceLabel">Article Weight</label>
                                                    </div>
                                                    <div class="alignLeft" style="margin-left:45px; margin-top:-3px;">
                                                        <label class="font13">-OR-</label>
                                                    </div>
                                                    <div class="alignLeft" style="margin-top:-7px;">
                                                        <input type="radio" id="rdoProminenceAudience" name="Prominence" style="margin-top:-2px;" onclick="SetProminenceType()" />
                                                        <label class="font13 prominenceLabel">Outlet Weight</label>
                                                    </div>
                                                </span>
                                                <span>
                                                    <input type="button" value="Done" id="btnSearchProminence" class="button" style="margin: 20px 0px 0px 0px;
                                                        padding: 2px; min-width: 40px;" onclick="SearchProminence();"/>
                                                </span>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="presentation" style="padding: 0px;">
                                        <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu" id="ulProminenceList">
                                            <li id="liProminence90" role="presentation" onclick="SetProminence(this,90);" class="cursorPointer">
                                                <a tabindex="-1" role="menuitem">Top 10%</a>
                                            </li>
                                            <li id="liProminence75" role="presentation" onclick="SetProminence(this,75);" class="cursorPointer">
                                                <a tabindex="-1" role="menuitem">Top 25%</a>
                                            </li>
                                            <li id="liProminence50" role="presentation" onclick="SetProminence(this,50);" class="cursorPointer">
                                                <a tabindex="-1" role="menuitem">Top 50%</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
            }
            }
          
           <li class="nmarket dropdown"><a data-toggle="dropdown" class="dropdown-toggle" role="button" id="marketFilter" href="#" onclick="toggleDiv('ulMarket')">Market<span class="spnArrow">&nbsp</span></a>
           <ul aria-labelledby="liMarketFilter" role="menu" class="nav nav-stacked nav-dropdpwn top25 hideDiv" id="ulMarket" >
           @{
            List<IQMedia.Model.DmaFilter> marketList = new List<IQMedia.Model.DmaFilter>();

            if (Model != null && Model["FeedFilter"] != null && Model["FeedFilter"].DMAFilter != null)
            {
                marketList = (List<IQMedia.Model.DmaFilter>)(Model["FeedFilter"].DMAFilter);
            }
            if (marketList.Count > 0)
            {
                                        <li role="presentation" id="liMarketSearch" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu">
                                                <li role="presentation" style="text-align: right">
                                                    <div>
                                                        <input type="button" value="Done" id="btnSearchMarket" class="button" style="margin: 0px;
                                                            padding: 2px; min-width: 40px;" onclick="SearchMarket();">
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                        <li role="presentation" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu" id="ulMarketList">
                                                @foreach (IQMedia.Model.DmaFilter item in marketList)
                                                {
                                                    <li role="presentation" onclick="SetDmaId(this,'@item.DmaName.Replace("\'", "\\\'")',@item.ID);"
										class="cursorPointer"><a tabindex="-1" role="menuitem">@( item.DmaName + " (" + item.CountFormatted + ")")</a>
                                                    </li>
                                                }
                                            </ul>
                                        </li>
									
                                                var json = Newtonsoft.Json.JsonConvert.SerializeObject(list);
                                        <script type="text/javascript"> _CurrentRequestFilter = @Html.Raw(json); </script>
            }
            else
            {
                                        <li role="presentation" id="liMarketSearch" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu">
                                                <li role="presentation" style="text-align: right">
                                                    <div>
                                                        <input type="button" value="Done" id="btnSearchMarket" class="button" style="margin: 0px;
                                                            padding: 2px; min-width: 40px;" onclick="SearchMarket();">
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                        <li role="presentation" style="padding: 0px;">
                                            <ul class="sideMenu sub-submenu" aria-labelledby="drop2" role="menu" id="ulMarketList">
                                                <li role="presentation" class="cursorPointer"><a tabindex="-1" role="menuitem">Loading...</a></li>
                                            </ul>
                                        </li>
            }
              }
             </ul>
                            </li>

                            <li class="dropdown isread"><a onclick="toggleDiv('ulIsRead')" class="dropdown-toggle" role="button"
                                id="A1" href="#">Read/Unread<span class="spnArrow">&nbsp;</span></a>
                                <ul aria-labelledby="drop2" role="menu" class="nav-dropdpwn sideMenu hideDiv" id="ulIsRead">
            @{
            if (Model != null && Model["FeedFilter"] != null && (Convert.ToInt64(Model["FeedFilter"].ReadFormatted) > 0 || Convert.ToInt64(Model["FeedFilter"].UnreadFormatted) > 0))
            {
                if (Convert.ToInt64(Model["FeedFilter"].ReadFormatted) > 0)
                {
                                        <li role="presentation" onclick="SetIsRead(true);">
                                            <a href="#" tabindex="-1" role="menuitem">@("Read (" + Model["FeedFilter"].ReadFormatted + ")")</a>
                                        </li>
                }
                if (Convert.ToInt64(Model["FeedFilter"].UnreadFormatted) > 0)
                {
                                        <li role="presentation" onclick="SetIsRead(false);">
                                            <a href="#" tabindex="-1" role="menuitem">@("Unread (" + Model["FeedFilter"].ReadFormatted + ")")</a>
                                        </li>
                }
            }
            else
            {
                                        <li role="presentation" class="cursorPointer">
                                            <a tabindex="-1" role="menuitem">Loading...</a>
                                        </li>
            }
            }  
                                </ul>
                            </li>
            @if (sessionInformation.isv5LRAccess)
            {
                            <li class="dropdown seenheard">
                                <a onclick="toggleDiv('ulSeenHeard')" class="dropdown-toggle" role="button" id="A1" href="#">
                                    Seen/Heard
                                    <span class="spnArrow">&nbsp;</span>
                                </a>
                                <ul aria-labelledby="drop2" role="menu" class="nav-dropdpwn sideMenu hideDiv" id="ulSeenHeard">
            @{
                if (Model != null && Model["FeedFilter"] != null)
                {
                    if (Model["FeedFilter"].Seen > 0)
                    {
                                        <li role="presentation" onclick="SetSeenHeard(true, false);">
                                            <a href="#" tabindex="-1" role="menuitem">@("Seen (" + Model["FeedFilter"].SeenFormatted + ")")</a>
                                        </li>
                    }
                    if (Model["FeedFilter"].Heard > 0)
                    {
                                        <li role="presentation" onclick="SetSeenHeard(false, true);">
                                            <a href="#" tabindex="-1" role="menuitem">@("Heard (" + Model["FeedFilter"].HeardFormatted + ")")</a>
                                        </li>
                    }
                }
                else
                {
                                        <li role="presentation" class="cursorPointer">
                                            <a tabindex="-1" role="menuitem">Loading...</a>
                                        </li>
                }
            }
                                    
                                </ul>
                            </li>
            }
                        </ul>
                    </div>
                </div>
                <!--/.well -->
            </div>
            <!--/span-->
            <div class="span9 span9-custom">
                <input type="hidden" id="hdnMaxFeedsExportCSVLimit" value="@feedsTempData.MaxFeedsExportCSVLimit" />
                <div class="row-fluid row-custom">
                    <!--/span-->
                    <div class="btn-group">
                        <a class="btn dropdown-toggle no-background" data-toggle="dropdown" href="#" id="aSortDirection">
                            Most Recent&nbsp;&nbsp;<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li class="cursorPointer"><a onclick="SortDirection(false);">Most Recent</a></li>
                            <li class="cursorPointer"><a onclick="SortDirection(true);">Oldest First</a></li>            
                        @{
            if (feedsTempData.UseProminence.HasValue && feedsTempData.UseProminence.Value)
            {     
                            <li class="cursorPointer"><a onclick="SetProminenceSort(false);">Article Weight</a></li>
                            <li class="cursorPointer"><a onclick="SetProminenceSort(true);">Outlet Weight</a></li>
            }
                        }
                        </ul>
                    </div>
                    <div class="btn-group">
                        <a class="btn dropdown-toggle no-background" data-toggle="dropdown" href="#" id="aDuration">
                            Last Month&nbsp;&nbsp;<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li class="cursorPointer"><a onclick="GetResultOnDuration(1);">Last 24 Hours</a></li>
                            <li class="cursorPointer"><a onclick="GetResultOnDuration(2);">Last Week</a></li>
                            <li class="cursorPointer"><a onclick="GetResultOnDuration(3);">Last Month</a></li>
                            <li class="cursorPointer"><a onclick="GetResultOnDuration(4);">Last 3 Months</a></li>
                            <li class="cursorPointer"><a onclick="GetResultOnDuration(5);">Custom</a></li>
                        </ul>
                    </div>
                    <div class="pull-right action">
                        <div class="btn-group fleft">
                            <a class="btn dropdown-toggle no-background" data-toggle="dropdown" href="#">Action&nbsp;&nbsp;<span
                                class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a class="cursorPointer" onclick="RemoveTVResult();">Remove</a></li>
                                <li><a class="cursorPointer" onclick="ShowSaveReportPopup();">Create Report</a></li>
                                <li><a class="cursorPointer" onclick="ShowAddToReportPopup();">Add to Report</a></li>
                                <li><a class="cursorPointer" onclick="ShowAddToLibraryPopup();">Add to Library</a></li>
                                <li><a class="cursorPointer" onclick="ShowExportCSVPopup();">Export to CSV</a></li>
                                <li><a class="cursorPointer" onclick="ExcludeDomains();">Exclude Domains</a></li>
                                <li><a class="cursorPointer" onclick="ShowSaveMissingArticlePopup()">Add Missing Article</a></li>
	                            <li id="liBuildDashboard"><a class="cursorPointer" onclick="BuildDashboard();">Build Dashboard</a></li>
                                <li><a class="cursorPointer" onclick="UpdateIsRead(true);">Mark as Read</a></li>
                                <li><a class="cursorPointer" onclick="UpdateIsRead(false);">Mark as Unread</a></li>
                            </ul>
                        </div>
                        <div class="btn-group fleft">
                            <a class="btn dropdown-toggle no-background" data-toggle="dropdown" href="#" id="aSelectAll">
                                Select All&nbsp;&nbsp;<span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="cursorPointer"><a onclick="SetSelectionType(0);">Select All</a></li>
                                <li class="cursorPointer"><a onclick="SetSelectionType(1);">Select All With Dupes</a></li>
                            </ul>
                        </div>
                        <div class="select">
                            <input id="chkInputAll" type="checkbox" onclick="checkUncheckAll('ulMediaResults','chkInputAll');" /></div>
                    </div>
                </div>
                <!--/row-->
                <div id="divMessage" class="notificationdiv">
                    <span id="spnNotification"></span>
                </div>
                <div class="filter">
                    <div id="divIsReadMsg" style="width:100%; text-align:center; color:Red; margin-bottom:8px; display:none;">Records recently marked as read/unread are currently processing.</div>
                    <div id="divActiveFilter" class="row-fluid"></div>
                </div>
                <div id="divNoData" class="alert" style="display:none;">
                    Data Not Available. Please Try Again <input value="Search Again" class="RefreshResult GreenFont" id="btnRefreshData" type="button" onclick="CallHandler()" />
                </div>
                @if (Model != null && !Model["IsValidResponse"])
                {
                    <script type="text/javascript">
                        $("#divNoData").show();
                    </script>
                }
                <div id="divRecordCount" style="font-weight: bold; text-align: right; vertical-align: middle;
                    padding: 5px 10px 0px 0;">
                    <span id="spanCurrentRecords">@string.Format("{0:n0}", feedsTempData.FromRecordID) (@string.Format("{0:n0}", feedsTempData.FromRecordIDDisplay))</span>
                    of <span id="spanTotalRecords">@string.Format("{0:n0}", feedsTempData.TotalResults)
                        (@string.Format("{0:n0}", feedsTempData.TotalResultsDisplay))</span>
                </div>
                @if (feedsTempData.TotalResults <= 0)
                {
                    <script type="text/javascript">
                        $("#divRecordCount").hide();
                    </script>
                }
                <div id="divMainContent" class="mainContent">
                    <div class="row-fluid posts" id="ulMediaResults">
                        @{
					
                if (Model != null && Model["HTML"] != null)
                {
                    var html = Model["HTML"];
                            @Html.Raw(@html)
                }
                        }
                    </div>
                    <div id="ulTempMediaResults" style="display: none">
                        &nbsp;</div>
                    <div align="center" id="divShowResult">
                        <img src="../../Images/Loading_1.gif" class="marginRight10 displayNone" id="imgMoreResultLoading"
                            alt='' />
                        @{                          
                if (Convert.ToInt64(feedsTempData.FromRecordID) >= Convert.ToInt64(feedsTempData.TotalResults))
                {
                            <input type="button" id="btnShowMoreResults" class="loadmore" value="No More Results" />
                }
                else
                {
                            <input type="button" id="btnShowMoreResults" class="loadmore" onclick="GetMoreResults();"
                                value="Show More Results" />
                }
                        }
                    </div>
                    <div class="padingDropdown">
                        @{
                if (System.Configuration.ConfigurationManager.AppSettings["FeedPageSizeOptions"] != null && System.Configuration.ConfigurationManager.AppSettings["FeedPageSizeOptions"].Split(',').Count() > 0)
                {
                    List<string> _PageSizeArray = System.Configuration.ConfigurationManager.AppSettings["FeedPageSizeOptions"].Split(',').ToList();
                            <a id="aPageSize" class="btn dropdown-toggle no-background margintop10 marginRight10 float-right" style="@(feedsTempData.TotalResults <= 0 ? "display:none" : string.Empty)"
                                onclick="showPopupOver()" data-toggle="dropdown fleft" href="#">@feedsTempData.DefaultFeedsPageSize
                                Items Per Page&nbsp;&nbsp;<span class="caret"></span></a>
						
                            <div id="divPageSizeDropDown" class="displayNone">
                                <ul class="dropdown-popover" style="width: auto;">
                                    @{
                    if (!_PageSizeArray.Contains(feedsTempData.DefaultFeedsPageSize.ToString()))
                    {
                        _PageSizeArray.Add(feedsTempData.DefaultFeedsPageSize.ToString());
                    }
                                    }
                                    @for (int i = 0; i < _PageSizeArray.Count(); i++)
                                    {
                                        <li><a class="cursorPointer" onclick="SelectPageSize(@_PageSizeArray[i]);">@_PageSizeArray[i]</a></li>
                                    }
                                </ul>
                            </div>
                }
                        }
                    </div>
                </div>
            </div>
            <!--/span-->
        }
        else
        {
            <div class="mainerrorDiv">@IQMedia.WebApplication.Config.ConfigSettings.Settings.PageLoadErrorMessage</div>
        }
    </div>
    <!--/row-->
</div>
@if (ViewBag.IsSuccess)
{
    <div id="divReportPopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgCloseEmalilPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divReportPopup');" /></div>
        <div style="padding-top: 20px;" class="modalBody">
            <form class="form-horizontal">
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px;
                font-weight: bold;">
                Create Feeds Report
            </div>
            <br />
            <div class="control-group">
                <label class="control-label" for="txtReportTitle">
                    Title</label>
                <div class="controls">
                    <input type="text" id="txtReportTitle" placeholder="Report Title" style="width: 85%;" />
                    <span class="help-inline" id="spanReportTitle" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtReportKeywords">
                    Keywords</label>
                <div class="controls">
                    <input type="text" id="txtReportKeywords" placeholder="Report Keywords" style="width: 85%;" />
                    <span class="help-inline" id="spanKeywords" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtReportDescription">
                    Description</label>
                <div class="controls">
                    <input type="text" id="txtReportDescription" placeholder="Report Description" style="width: 85%;" />
                    <span class="help-inline" id="spanDescription" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlReportCategory">
                    Category</label>
                <div class="controls">
                    <select id="ddlReportCategory">
                    </select>
                    <span class="help-inline" id="spanPCategory" style="color: #FF0000; display: none;">
                    </span> <a class="cursorPointer" onclick="CreateAndOpenAddCategoryPopup(GetCustomCategory,'undefined',true);">Add Category
                            </a>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlReportImage">
                    Report Image</label>
                <div class="controls">
                    <select id="ddlReportImage">
                        <option>Default</option>
                        @if (Model != null && Model["ReportImages"] != null)
                        {
                            List<IQMedia.Model.IQClient_CustomImageModel> lstIQClient_CustomImageModel = (List<IQMedia.Model.IQClient_CustomImageModel>)Model["ReportImages"];
                            foreach (IQMedia.Model.IQClient_CustomImageModel item in lstIQClient_CustomImageModel)
                            {
                            <option value="@item.ID">@item.Location</option>
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlReportFolder">
                    Report Folder</label>
                <div class="controls">
                    <select id="ddlReportFolder">
                        @if (Model != null && Model["ReportFolders"] != null)
                        {
                            List<IQMedia.Model.IQReport_FolderModel> lstIQReport_FolderModel = (List<IQMedia.Model.IQReport_FolderModel>)Model["ReportFolders"];
                            string lastParent = "THIS IS NOT A VALID ID";
                            string lastLastParent = "THIS IS NOT A VALID ID";
                            int spaceCount = 0;
                            Dictionary<string, int> indents = new Dictionary<string, int>();

                            foreach (IQMedia.Model.IQReport_FolderModel item in lstIQReport_FolderModel)
                            {
                                if (lastParent == item.parent)
                                {
                                    spaceCount++;
                                }
                                else if (lastLastParent != item.parent && lastLastParent != "THIS IS NOT A VALID ID")
                                {
                                    if (indents.ContainsKey(item.parent))
                                    {
                                        spaceCount = indents.Where(x => x.Key == item.parent).Select(x => x.Value).First();
                                    }
                                    else
                                    {
                                        spaceCount--;
                                    }
                                }

                                if (item.parent != null && !indents.ContainsKey(item.parent))
                                {
                                    indents.Add(item.parent, spaceCount);
                                }

                                lastLastParent = lastParent;
                                lastParent = item.id;   
                            
                                <option value="@item.id">
                                    @{
                                for (int x = 0; x < spaceCount; x++)
                                {
                                            <p>&nbsp;</p>
                                }
                                    }
                                
                                    -@item.text
                                </option>
                            }
                        }
                    </select>
                    <span class="help-inline" id="spanReportFolder" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <button type="button" id="btnCancel" onclick="ClosePopUp('divReportPopup');" class="cancelButton">
                        Cancel</button>
                    <button type="button" id="btnCreateReport" onclick="InsertFeedsReport();" class="button">
                        OK</button>
                    <img alt="" id="imgCreateReportLoading" class="marginLeft10 displayNone" src="../../Images/Loading_1.gif" />
                </div>
            </div>
            </form>
        </div>
    </div>
    <div id="divAddToReportPopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgAddToReportPopupPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divAddToReportPopup');" /></div>
        <div style="padding-top: 20px;" class="modalBody">
            <div id="divAddtoReportMsg" class="center" style="font-weight: bold">
            </div>
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px;
                font-weight: bold;">
                Add To Feeds Report
            </div>
            <div id="divAddtoReport">
                <form class="form-horizontal">
                <div class="control-group">
                    <label class="control-label" for="spnAddToReportNote">
                    </label>
                    <div class="controls">
                        <span id="spnAddToReportPopupNote" class="RedFont"></span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="ddlReportTitle">
                        Report</label>
                    <div class="controls">
                        <select id="ddlReportTitle">
                        </select>
                        <span class="help-inline" id="spanReportValidationMessage" style="color: #FF0000;
                            display: none;"></span>
                        <img src="../../Images/Loading_1.gif" class="marginRight10 displayNone" id="imgRefreshReportLoading"
                            alt='' /><a class="cursorPointer" id="lnkFeedReport" onclick="GetFeedsReport();">Refresh
                            </a>
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="button" id="btnCancel" onclick="ClosePopUp('divAddToReportPopup');"
                            class="cancelButton">
                            Cancel</button>
                        <button type="button" id="btnAddToReport" onclick="AddToFeedsReport();" class="button">
                            OK</button>
                        <img alt="" id="imgAddToReportLoading" class="marginLeft10 displayNone" src="../../Images/Loading_1.gif" />
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>
    <div id="divAddToLibraryPopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgAddToLibraryPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divAddToLibraryPopup');" /></div>
        <div style="padding-top: 20px;" class="modalBody">
            <form class="form-horizontal">
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px;
                font-weight: bold;">
                <input type="hidden" id="hdnfeedid" value="" />
                Add To Library
            </div>
            <br />
            <div id="divCommonErrorMsg" style="color: #FF0000; display: none; padding-left: 15px;
                margin-bottom: 10px;">
            </div>
            <div class="control-group">
                <label class="control-label" for="spnAddToLibraryNote">
                </label>
                <div class="controls">
                    <span id="spnAddToLibraryPopupNote" class="RedFont"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtLibraryKeywords">
                    Keywords</label>
                <div class="controls">
                    <input type="text" id="txtLibraryKeywords" placeholder="Keywords" style="width: 85%;" />
                    <span class="help-inline" id="spanLibraryKeywords" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtLibraryDescription">
                    Description</label>
                <div class="controls">
                    <input type="text" id="txtLibraryDescription" placeholder="Description" style="width: 85%;" />
                    <span class="help-inline" id="spanLibraryDescription" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlLibraryCategory">
                    Category</label>
                <div class="controls">
                    <select id="ddlLibraryCategory" onchange="OnSelectFeedsCategory(this.id)">
                    </select> <a class="cursorPointer" onclick="CreateAndOpenAddCategoryPopup(GetCustomCategory,'undefined',true);">Add Category
                            </a>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlLibrarySubCategory1">
                    Sub category 1</label>
                <div class="controls">
                    <select id="ddlLibrarySubCategory1" onchange="OnSelectFeedsCategory(this.id)"></select>
                    <a class="cursorPointer" onclick="CreateAndOpenAddCategoryPopup(GetCustomCategory,'undefined',true);">Add Category</a>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlLibrarySubCategory2">
                    Sub category 2</label>
                <div class="controls">
                    <select id="ddlLibrarySubCategory2" onchange="OnSelectFeedsCategory(this.id)"></select>
                    <a class="cursorPointer" onclick="CreateAndOpenAddCategoryPopup(GetCustomCategory,'undefined',true);">Add Category</a>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlLibrarySubCategory3">
                    Sub category 3</label>
                <div class="controls">
                    <select id="ddlLibrarySubCategory3" onchange="OnSelectFeedsCategory(this.id)"></select>
                    <a class="cursorPointer" onclick="CreateAndOpenAddCategoryPopup(GetCustomCategory,'undefined',true);">Add Category</a>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <button type="button" id="btnLibraryCancel" onclick="ClosePopUp('divAddToLibraryPopup');"
                        class="cancelButton">
                        Cancel</button>
                    <button type="button" id="btnAddToLibrary" onclick="AddToFeedsLibrary();" class="button">
                        OK</button>
                    <img alt="" id="imgAddToLibraryLoading" class="marginLeft10 displayNone" src="../../Images/Loading_1.gif" />
                </div>
            </div>
            </form>
        </div>
    </div>
    <div id="divLoadTMIframePopup" class="modal fade hide resizable modalPopupDiv" style="left: 0px;">
        <div class="closemodalpopup">
            <img id="imgLoadTMIframePopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divLoadTMIframePopup');$('#iFrameFeedsTM').attr('src', '');" /></div>
        <div style="width: 100%; height: 100%;">
            <iframe id="iFrameFeedsTM" style="width: 100%; height: 100%;" frameborder="0" src="">
            </iframe>
        </div>
    </div>
    <div id="divSaveMissingArticlePopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgAddToLibraryPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divSaveMissingArticlePopup');" /></div>
        <div style="padding-top: 20px;" class="modalBody">
            <form class="form-horizontal">
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px;
                font-weight: bold;">
                Add Missing Article
            </div>
            <br />
            <div class="control-group">
                <label class="control-label" for="txtArtcileTitle">
                    Title</label>
                <div class="controls">
                    <input type="text" id="txtArtcileTitle" placeholder="Missing Article Title" style="width: 85%;" />
                    <span class="help-inline" id="spanArtcileTitle" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtArtcileUrl">
                    Url</label>
                <div class="controls">
                    <input type="text" id="txtArtcileUrl" placeholder="Missing Article Url" style="width: 85%;" />
                    <span class="help-inline" id="spanArtcileUrl" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlArtcileSearchRequest">
                    IQAgent</label>
                <div class="controls">
                    <select id="ddlArtcileSearchRequest">
                        <option value="0">Select IQAgent</option>
                        @if (Model != null && Model["SearchRequests"] != null)
                        {
                            List<IQMedia.Model.IQAgent_SearchRequestModel> lstIQAgent_SearchRequestModel = (List<IQMedia.Model.IQAgent_SearchRequestModel>)Model["SearchRequests"];
                            foreach (IQMedia.Model.IQAgent_SearchRequestModel item in lstIQAgent_SearchRequestModel)
                            {
                            <option value="@item.ID">@item.QueryName</option>
                            }
                        }
                    </select>
                    <span class="help-inline" id="spanArtcileSearchRequest" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtArticleGMTDate">
                    Local Date</label>
                <div class="controls">
                    <input type="text" id="txtArticleGMTDate" name="txtArticleGMTDate" />
                    <span class="help-inline" id="spanArticleGMTDate" style="color: #FF0000; display: none;
                        vertical-align: top"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="ddlArtcileCategory">
                    Source Type</label>
                <div class="controls">
                    <select id="ddlArtcileCategory">
                        <option value="0">Select Source Type</option>
                        @{
                        foreach (CommonFunctions.MissingArticleTypes enumValue in Enum.GetValues(typeof(CommonFunctions.MissingArticleTypes)).Cast<CommonFunctions.MissingArticleTypes>().OrderBy(a => a.ToString()))
                        {
                                <option value="@enumValue">@CommonFunctions.GetEnumDescription(enumValue)</option>
                        }
                        }
                    </select>
                    <span class="help-inline" id="spanArtcileCategory" style="color: #FF0000; display: none;">
                    </span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="txtArtcileContent">
                    Content</label>
                <div class="controls">
                    <textarea id="txtArtcileContent" name="txtArtcileContent" rows="8" cols="50" placeholder="Content"
                        class="txtwidth90per"></textarea>
                    <span class="help-inline" id="spanArtcileContent" style="color: #FF0000; display: none;
                        vertical-align: top"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="chkArticleAddToLibrary">Add to Library</label>
                <div class="controls">
                    <input type="checkbox" id="chkArticleAddToLibrary" checked="checked" style="vertical-align: sub !important;"  />
                    <div class="controls" style="margin-left:0px; display:inline-block;">
                        <label class="" style="float:left; width:100px; padding-top:5px; text-align:right;" for="ddLibraryCategory">Category</label>
                        <select class="" id="ddLibraryCategory" style="margin-left:15px;">
                        </select>
                        <span class="help-inline" id="spanLibraryCategory" style="color: #FF0000;">
                    </div>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <button type="button" id="btnCancel" onclick="ClosePopUp('divSaveMissingArticlePopup');"
                        class="cancelButton">
                        Cancel</button>
                    <button type="button" id="btnCreateReport" onclick="SaveMissingArticle();" class="button">
                        Save</button>
                    <img alt="" id="imgCreateReportLoading" class="marginLeft10 displayNone" src="../../Images/Loading_1.gif" />
                </div>
            </div>
            </form>
        </div>
    </div>
    <div id="divDashboardPopup" class="modal fade hide resizable modalPopupDiv" style="width:880px;">
        <div class="closemodalpopup">
            <img id="imgCloseDashboardPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="CloseDashboardPopup();" />
        </div>
        <div style="width: 99.5%; height: 99.5%;margin-left:10px;" id="divFrameResize" >
            <iframe id="iFrameDashboard" style="width: 100%; height: 100%;" src="" frameborder="0" ></iframe>
        </div>
    </div>
    <div id="divViewArticlePopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgdivViewArticlePopup" src="~/images/close-icon.png" alt="close" class="popup-top-close" 
                onclick="CloseViewArticlePopup();" /></div>
        <div style="padding: 20px;" class="modalBody">
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin-bottom:10px; font-weight: bold;">
                <div id="divPQTitle" style="float:left;"></div>
                <div id="divPQMediaDate" style="float:right;"></div>
                <div style="clear:both;"></div>
            </div>
            <div class="control-group">
                <label class="control-label" style="font-weight:bold;">
                    Author</label>
                <div id="divPQAuthor" class="controls" style="margin-left:15px;"></div>
            </div>
            <div class="control-group">
                <label class="control-label" style="font-weight:bold;">
                    Publication</label>
                <div id="divPQPublication" class="controls" style="margin-left:15px;"></div>
            </div>
            <div class="control-group">
                <label class="control-label" style="font-weight:bold;">
                    Content</label>
                <div id="divPQContent" class="controls" style="margin-left:15px;"></div>
            </div>
            <div class="control-group">
                <label class="control-label" style="font-weight:bold;">
                    Copyright</label>
                <div id="divPQCopyright" class="controls" style="margin-left:15px;"></div>
            </div>
        </div>
    </div>
    <div id="divJobStatusExportedPopup" class="modal fade hide resizable modalPopupDiv">
            <div class="closemodalpopup">
            <img id="imgdivJobStatusExportedPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close"
                onclick="ClosePopUp('divJobStatusExportedPopup');" /></div>
            <div style="padding-top: 20px;" class="modalBody">
            <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px;
                font-weight: bold;">
                Job Status
            </div>
            <div class="divconfirmationpop-content">
                <p><a href="/Setup?JS=true" style="cursor:pointer;">Click here</a> to view your job status and download your file.</p>
            </div>
        </div>
    </div>
    <div id="divExportCSVPopup" class="modal fade hide resizable modalPopupDiv">
        <div class="closemodalpopup">
            <img id="imgExportCSVPopup" src="~/images/close-icon.png" alt="close" class="popup-top-close" onclick="ClosePopUp('divExportCSVPopup');" />
        </div>
        <div style="padding-top: 20px;" class="modalBody">
            <form class="form-horizontal">
                <div style="padding-bottom: 5px; border-bottom: 1px solid #dadada; margin: 1px 15px 1px 15px; font-weight: bold;">
                    Export To CSV
                </div>
                <br />
                <div class="control-group">
                    <label class="control-label" for="txtExportCSVTitle">Title</label>
                    <div class="controls">
                        <input type="text" id="txtExportCSVTitle" placeholder="Export Title (Optional)" style="width: 85%;" />
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="chkGetTVUrl">Include TV/Radio Urls</label>
                    <div class="controls">
                        <input type="checkbox" id="chkGetTVUrl" checked="checked" style="margin-top:-1px;" />
                        <span style="margin-left:3px; margin-top:3px; display:inline-block;">(This adds additional processing time to generate the csv file)</span>
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="button" id="btnCancelExportCSV" onclick="ClosePopUp('divExportCSVPopup');" class="cancelButton">Cancel</button>
                        <button type="button" id="btnExportCSV" onclick="ExportFeedsToCSV(); ClosePopUp('divExportCSVPopup');" class="button">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        //this is called at last becasue , default filter for date can be set after HTML is rendered
        SetActiveFilter();    
    </script>
                        if (!string.IsNullOrEmpty(Request.QueryString["date"]) || !string.IsNullOrEmpty(Request.QueryString["fromDate"]) || !string.IsNullOrEmpty(Request.QueryString["mediatype"]) || !string.IsNullOrEmpty(Request.QueryString["submediatype"]))
                        {
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-transition.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-alert.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-modal.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-dropdown.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-scrollspy.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-tab.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-tooltip.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-popover.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-button.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-collapse.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-carousel.js?v=1.0")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-typeahead.js?v=1.0")" type="text/javascript"></script>
    <script src="~/Scripts/jquery.mCustomScrollbar.concat.min.js?v=1.1" type="text/javascript"></script>
                        }
}
